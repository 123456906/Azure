// ================================
// 创建行星对象
// ================================

const planet = new Planet("tutorial-mod-tutorial-planet", Planets.sun, 1, 3);

// 导入地形生成器
const sbAnuken = require("PlanetGenerator");

// ================================
// 设置行星属性
// ================================

planet.localizedName = "⚶";
planet.description = "回响";
planet.details = "这里有人生活过。";

// ================================
// 设置行星外观（网格）
// ================================

planet.meshLoader = prov(() => new HexMesh(planet, 6));

// ================================
// 设置行星云层
// ================================

planet.cloudMeshLoader = prov(() => new MultiMesh(
    new HexSkyMesh(planet, 4, 0.12, 0.18, 5, Color.valueOf("9B6BFF80"), 2, 0.42, 1.2, 0.45),
    new HexSkyMesh(planet, 6, 0.3, 0.15, 4, Color.valueOf("6BFFE580"), 2, 0.48, 1.3, 0.47),
    new HexSkyMesh(planet, 3, 0.45, 0.12, 6, Color.valueOf("FF8BB580"), 2, 0.52, 1.1, 0.43),
    new HexSkyMesh(planet, 2, 0.6, 0.08, 5, Color.valueOf("5BE0C0A0"), 2, 0.58, 0.9, 0.41)
));

// 使用改名后的生成器
planet.generator = new sbAnuken();

// ================================
// 设置行星大气
// ================================

planet.atmosphereColor = Color.valueOf("7B5BFF40");
planet.lightColor = Color.valueOf("9B8BFF60");
planet.atmosphereRadIn = 0;
planet.atmosphereRadOut = 0.3;

// ================================
// 设置行星可见性和可访问性
// ================================

planet.visible = true;
planet.bloom = true;
planet.accessible = true;
planet.alwaysUnlocked = true;
planet.defaultEnv = Env.terrestrial;

// ================================
// 设置行星轨道参数
// ================================

planet.startSector = 175;
planet.camRadius = 0.5;
planet.orbitRadius = 75;
planet.orbitSpacing = 2;
planet.orbitTime = 240 * 60;
planet.rotateTime = 15 * 60;
planet.iconColor = Color.valueOf("7B5BFFFF");
planet.clearSectorOnLose = true;
planet.prebuildBase = false;

// ================================
// 创建星区
// ================================

const testSector = new SectorPreset("testSector", planet, 175);
testSector.captureWave = 20;
testSector.difficulty = 2;
testSector.alwaysUnlocked = true;
testSector.addStartingItems = false;
testSector.localizedName = "测试区域";
testSector.description = "测试用区域";

// ================================
// 导出 - 只导出必要的
// ================================

exports.planet = planet;
exports.testSector = testSector;